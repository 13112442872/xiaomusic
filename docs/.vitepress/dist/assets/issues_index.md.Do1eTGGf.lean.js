import{_ as s,c as a,a0 as t,o as l}from"./chunks/framework.p2VkXzrt.js";const c=JSON.parse('{"title":"XiaoMusic: 无限听歌，解放小爱音箱","description":"","frontmatter":{},"headers":[],"relativePath":"issues/index.md","filePath":"issues/index.md","lastUpdated":null}'),h={name:"issues/index.md"};function e(n,i,p,k,r,o){return l(),a("div",null,i[0]||(i[0]=[t(`<h1 id="xiaomusic-无限听歌-解放小爱音箱" tabindex="-1">XiaoMusic: 无限听歌，解放小爱音箱 <a class="header-anchor" href="#xiaomusic-无限听歌-解放小爱音箱" aria-label="Permalink to &quot;XiaoMusic: 无限听歌，解放小爱音箱&quot;" target="_self">​</a></h1><p><a href="https://github.com/hanxi/xiaomusic" target="_self"><img src="https://img.shields.io/github/license/hanxi/xiaomusic" alt="GitHub License"></a><a href="https://hub.docker.com/r/hanxi/xiaomusic" target="_self"><img src="https://img.shields.io/docker/v/hanxi/xiaomusic?sort=semver&amp;label=docker%20image" alt="Docker Image Version"></a><a href="https://hub.docker.com/r/hanxi/xiaomusic" target="_self"><img src="https://img.shields.io/docker/pulls/hanxi/xiaomusic" alt="Docker Pulls"></a><a href="https://pypi.org/project/xiaomusic/" target="_self"><img src="https://img.shields.io/pypi/v/xiaomusic" alt="PyPI - Version"></a><a href="https://pypi.org/project/xiaomusic/" target="_self"><img src="https://img.shields.io/pypi/dm/xiaomusic" alt="PyPI - Downloads"></a><a href="https://pypi.org/project/xiaomusic/" target="_self"><img src="https://img.shields.io/python/required-version-toml?tomlFilePath=https%3A%2F%2Fraw.githubusercontent.com%2Fhanxi%2Fxiaomusic%2Fmain%2Fpyproject.toml" alt="Python Version from PEP 621 TOML"></a><a href="https://github.com/hanxi/xiaomusic/releases" target="_self"><img src="https://img.shields.io/github/v/release/hanxi/xiaomusic" alt="GitHub Release"></a><a href="https://visitorbadge.io/status?path=hanxi%2Fxiaomusic" target="_self"><img src="https://api.visitorbadge.io/api/daily?path=hanxi%2Fxiaomusic&amp;label=daily%20visitor&amp;countColor=%232ccce4&amp;style=flat" alt="Visitors"></a><a href="https://visitorbadge.io/status?path=hanxi%2Fxiaomusic" target="_self"><img src="https://api.visitorbadge.io/api/visitors?path=hanxi%2Fxiaomusic&amp;label=total%20visitor&amp;countColor=%232ccce4&amp;style=flat" alt="Visitors"></a></p><p>使用小爱音箱播放音乐，音乐使用 yt-dlp 下载。</p><p><a href="https://github.com/hanxi/xiaomusic" target="_self">https://github.com/hanxi/xiaomusic</a></p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>初次安装遇到问题请查阅 <a href="https://github.com/hanxi/xiaomusic/issues/99" target="_self">💬 FAQ问题集合</a> ，一般遇到的问题都已经有解决办法。</p></div><h2 id="👋-最简配置运行" tabindex="-1">👋 最简配置运行 <a class="header-anchor" href="#👋-最简配置运行" aria-label="Permalink to &quot;👋 最简配置运行&quot;" target="_self">​</a></h2><p>已经支持在 web 页面配置其他参数，docker 启动命令如下:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8090:8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /xiaomusic/music:/app/music</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /xiaomusic/conf:/app/conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hanxi/xiaomusic</span></span></code></pre></div><p>🔥 国内：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8090:8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /xiaomusic/music:/app/music</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /xiaomusic/conf:/app/conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> m.daocloud.io/docker.io/hanxi/xiaomusic</span></span></code></pre></div><p>对应的 docker compose 配置如下：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  xiaomusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hanxi/xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8090:8090</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/music:/app/music</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/conf:/app/conf</span></span></code></pre></div><p>🔥 国内：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  xiaomusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m.daocloud.io/docker.io/hanxi/xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8090:8090</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/music:/app/music</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/conf:/app/conf</span></span></code></pre></div><p>其中 conf 目录为配置文件存放目录，music 目录为音乐存放目录，建议分开配置为不同的目录。</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>上面配置的 /xiaomusic/music 和 /xiaomusic/conf 是 docker 主机里的 /xiaomusic 目录下的，可以修改为其他目录。如果报错找不到 /xiaomusic/music 目录，可以先执行 <code>mkdir -p /xiaomusic/{music,conf}</code> 命令新建目录。</p></div><p>docker 和 docker compose 二选一即可，启动成功后，在 web 页面可以配置其他参数，带有 <code>*</code> 号的配置是必须要配置的，其他的用不上时不用修改。初次配置时需要在页面上输入小米账号和密码保存后才能获取到设备列表。</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>目前安装步骤已经是最简化了，如果还是嫌安装麻烦，可以微信或者 QQ 约我远程安装，我一般周末和晚上才有时间，收个辛苦费 💰 50 元一次，安装失败不收费。</p></div><h3 id="🔥-修改默认8090端口映射" tabindex="-1">🔥 修改默认8090端口映射 <a class="header-anchor" href="#🔥-修改默认8090端口映射" aria-label="Permalink to &quot;🔥 修改默认8090端口映射&quot;" target="_self">​</a></h3><h4 id="方法1-不修改监听端口-8090" tabindex="-1">方法1： 不修改监听端口 8090 <a class="header-anchor" href="#方法1-不修改监听端口-8090" aria-label="Permalink to &quot;方法1： 不修改监听端口 8090&quot;" target="_self">​</a></h4><p>【监听端口】保持为默认的 8090 不变，把【外网访问端口】改为 5678 。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  xiaomusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hanxi/xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5678:8090</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/music:/app/music</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/conf:/app/conf</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      XIAOMUSIC_PUBLIC_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5678</span></span></code></pre></div><p>XIAOMUSIC_PUBLIC_PORT 对应后台设置里的【外网访问端口】，修改后可以不用重启。</p><h4 id="方法2-修改监听端口-8090-为-5678" tabindex="-1">方法2： 修改监听端口 8090 为 5678 <a class="header-anchor" href="#方法2-修改监听端口-8090-为-5678" aria-label="Permalink to &quot;方法2： 修改监听端口 8090 为 5678&quot;" target="_self">​</a></h4><p>如果需要修改 8090 端口为其他端口，比如 5678，需要这样配，3个数字都需要是 5678 。见 <a href="https://github.com/hanxi/xiaomusic/issues/19" target="_self">https://github.com/hanxi/xiaomusic/issues/19</a></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  xiaomusic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hanxi/xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5678:5678</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/music:/app/music</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/xiaomusic/conf:/app/conf</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      XIAOMUSIC_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5678</span></span></code></pre></div><p>如果不是首次修改端口，还需要修改 /xiaomusic/conf/setting.json 文件里的端口(也可以在后台修改监听端口后重启)。</p><p>遇到问题可以去 web 设置页面底部点击【下载日志文件】按钮，然后搜索一下日志文件内容确保里面没有账号密码信息后(有就删除这些敏感信息)，然后在提 issues 反馈问题时把下载的日志文件带上。</p><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>XIAOMUSIC_PORT 也可以在后台配置，对应的是监听端口，修改后记得重启。</p></div><h3 id="🤐-支持语音口令" tabindex="-1">🤐 支持语音口令 <a class="header-anchor" href="#🤐-支持语音口令" aria-label="Permalink to &quot;🤐 支持语音口令&quot;" target="_self">​</a></h3><ul><li>【播放歌曲】，播放本地的歌曲</li><li>【播放歌曲+歌名】，比如：播放歌曲周杰伦晴天</li><li>【上一首】</li><li>【下一首】</li><li>【单曲循环】</li><li>【全部循环】</li><li>【随机播放】</li><li>【关机】，【停止播放】，两个效果是一样的。</li><li>【刷新列表】，当复制了歌曲进 music 目录后，可以用这个口令刷新歌单。</li><li>【播放列表+列表名】，比如：播放列表其他。</li><li>【加入收藏】，把当前播放的歌曲加入收藏歌单。</li><li>【取消收藏】，把当前播放的歌曲从收藏歌单里移除。</li><li>【播放列表收藏】，这个用于播放收藏歌单。</li><li>【播放本地歌曲+歌名】，这个口令和播放歌曲的区别是本地找不到也不会去下载。</li><li>【播放列表第几个+列表名】，具体见： <a href="https://github.com/hanxi/xiaomusic/issues/158" target="_self">https://github.com/hanxi/xiaomusic/issues/158</a></li><li>【搜索播放+关键词】，会搜索关键词作为临时搜索列表播放，比如说【搜索播放林俊杰】，会播放所有林俊杰的歌。</li><li>【本地搜索播放+关键词】，跟搜索播放的区别是本地找不到也不会去下载。</li></ul><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>隐藏玩法: 对小爱同学说播放歌曲小猪佩奇的故事，会先下载小猪佩奇的故事，然后再播放小猪佩奇的故事。</p></div><h2 id="🛠️-pip-方式安装运行" tabindex="-1">🛠️ pip 方式安装运行 <a class="header-anchor" href="#🛠️-pip-方式安装运行" aria-label="Permalink to &quot;🛠️ pip 方式安装运行&quot;" target="_self">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pip install -U xiaomusic</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xiaomusic --help</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> __</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  __</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  _</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   __</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  __</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 _</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (_)   __ _    ___   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  _</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   _</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ___</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (_)   ___</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> _\` </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> _ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> __</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> __</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> \\__</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /_/\\_\\</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\__,_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\___/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\__,_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">___/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  \\___</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          XiaoMusic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v0.3.37 by: github.com/hanxi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaomusic [-h] [--port PORT] [--hardware HARDWARE] [--account ACCOUNT]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 [--password PASSWORD] [--cookie COOKIE] [--verbose]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 [--config CONFIG] [--ffmpeg_location FFMPEG_LOCATION]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -h,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            show this help message and exit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PORT           监听端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --hardware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HARDWARE   小爱音箱型号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --account</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ACCOUNT     xiaomi account</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PASSWORD   xiaomi password</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --cookie</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COOKIE       xiaomi cookie</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --verbose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             show info</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CONFIG       config file path</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --ffmpeg_location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FFMPEG_LOCATION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        ffmpeg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin path</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaomusic --config config.json</span></span></code></pre></div><p>其中 <code>config.json</code> 文件可以参考 <code>config-example.json</code> 文件配置。见 <a href="https://github.com/hanxi/xiaomusic/issues/94" target="_self">https://github.com/hanxi/xiaomusic/issues/94</a></p><p>不修改默认端口 8090 的情况下，只需要执行 <code>xiaomusic</code> 即可启动。</p><h2 id="🔩-开发环境运行" tabindex="-1">🔩 开发环境运行 <a class="header-anchor" href="#🔩-开发环境运行" aria-label="Permalink to &quot;🔩 开发环境运行&quot;" target="_self">​</a></h2><ul><li>使用 install_dependencies.sh 下载依赖</li><li>使用 pdm 安装环境</li><li>默认监听了端口 8090 , 使用其他端口自行修改。</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pdm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaomusic.py</span></span></code></pre></div><p>如果是开发前端界面，可以通过 <a href="http://localhost:8090/docs" target="_self">http://localhost:8090/docs</a> 查看有什么接口。目前的 web 控制台非常简陋，欢迎有兴趣的朋友帮忙实现一个漂亮的前端，需要什么接口可以随时提需求。</p><h3 id="🚦-代码提交规范" tabindex="-1">🚦 代码提交规范 <a class="header-anchor" href="#🚦-代码提交规范" aria-label="Permalink to &quot;🚦 代码提交规范&quot;" target="_self">​</a></h3><p>提交前请执行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pdm lintfmt</span></span></code></pre></div><p>用于检查代码和格式化代码。</p><h3 id="本地编译-docker-image" tabindex="-1">本地编译 Docker Image <a class="header-anchor" href="#本地编译-docker-image" aria-label="Permalink to &quot;本地编译 Docker Image&quot;" target="_self">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaomusic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><h3 id="技术栈" tabindex="-1">技术栈 <a class="header-anchor" href="#技术栈" aria-label="Permalink to &quot;技术栈&quot;" target="_self">​</a></h3><ul><li>后端代码使用 Python 语言编写。</li><li>HTTP 服务使用的是 FastAPI 框架，<s>早期版本使用的是 Flask</s>。</li><li>使用了 Docker ，在 NAS 上安装更方便。</li><li>默认的前端主题使用了 jQuery 。</li></ul><h2 id="已测试支持的设备" tabindex="-1">已测试支持的设备 <a class="header-anchor" href="#已测试支持的设备" aria-label="Permalink to &quot;已测试支持的设备&quot;" target="_self">​</a></h2><table tabindex="0"><thead><tr><th>型号</th><th>名称</th></tr></thead><tbody><tr><td>L06A</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l06a" target="_self">小爱音箱</a></td></tr><tr><td>L07A</td><td><a href="https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l7a" target="_self">Redmi小爱音箱 Play</a></td></tr><tr><td>S12/S12A/MDZ-25-DA</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.s12" target="_self">小米AI音箱</a></td></tr><tr><td>LX5A</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx5a" target="_self">小爱音箱 万能遥控版</a></td></tr><tr><td>LX05</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx05" target="_self">小爱音箱Play（2019款）</a></td></tr><tr><td>L15A</td><td><a href="https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l15a#/" target="_self">小米AI音箱（第二代）</a></td></tr><tr><td>L16A</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l16a" target="_self">Xiaomi Sound</a></td></tr><tr><td>L17A</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l17a" target="_self">Xiaomi Sound Pro</a></td></tr><tr><td>LX06</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx06" target="_self">小爱音箱Pro</a></td></tr><tr><td>LX01</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx01" target="_self">小爱音箱mini</a></td></tr><tr><td>L05B</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l05b" target="_self">小爱音箱Play</a></td></tr><tr><td>L05C</td><td><a href="https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l05c" target="_self">小米小爱音箱Play 增强版</a></td></tr><tr><td>L09A</td><td><a href="https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l09a" target="_self">小米音箱Art</a></td></tr><tr><td>LX04 X10A X08A</td><td>已经支持的触屏版</td></tr><tr><td>X08C X08E X8F</td><td>需要设置【型号兼容模式】选项为 true</td></tr><tr><td>M01/XMYX01JY</td><td>小米小爱音箱HD 需要设置【特殊型号获取对话记录】选项为 true 才能语音播放</td></tr></tbody></table><p>型号与产品名称对照可以在这里查询 <a href="https://home.miot-spec.com/s/xiaomi.wifispeaker" target="_self">https://home.miot-spec.com/s/xiaomi.wifispeaker</a></p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>如果你的设备支持播放，请反馈给我添加到支持列表里，谢谢。 目前应该所有设备类型都已经支持播放，有问题随时反馈。 其他触屏版不能播放可以设置【型号兼容模式】选项为 true 试试。见 <a href="https://github.com/hanxi/xiaomusic/issues/30" target="_self">https://github.com/hanxi/xiaomusic/issues/30</a></p></div><h2 id="🎵-支持音乐格式" tabindex="-1">🎵 支持音乐格式 <a class="header-anchor" href="#🎵-支持音乐格式" aria-label="Permalink to &quot;🎵 支持音乐格式&quot;" target="_self">​</a></h2><ul><li>mp3</li><li>flac</li><li>wav</li><li>ape</li><li>ogg</li><li>m4a</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>本地音乐会搜索目录下上面格式的文件，下载的歌曲是 mp3 格式的。 已知 L05B L05C LX06 L16A 不支持 flac 格式。 如果格式不能播放可以打开【转换为MP3】和【型号兼容模式】选项。具体见 <a href="https://github.com/hanxi/xiaomusic/issues/153#issuecomment-2328168689" target="_self">https://github.com/hanxi/xiaomusic/issues/153#issuecomment-2328168689</a></p></div><h2 id="💡-简易的控制面板" tabindex="-1">💡 简易的控制面板 <a class="header-anchor" href="#💡-简易的控制面板" aria-label="Permalink to &quot;💡 简易的控制面板&quot;" target="_self">​</a></h2><p>浏览器进入 <a href="http://192.168.2.5:8090" target="_self">http://192.168.2.5:8090</a></p><ul><li>ip 是 XIAOMUSIC_HOSTNAME 设置的</li><li>8090 是默认端口</li><li>支持功能 <ul><li>显示正在播放的歌曲</li><li>模糊搜索本地歌曲</li><li>播放列表</li><li>删除歌曲</li><li>设置页面</li><li>配置网络歌单</li><li>日志文件下载</li></ul></li></ul><p>采用新的设置页面之后，没有必须在启动前配置的环境变量了，除非是改默认的 8090 端口才需要配置环境变量。</p><h2 id="🌏-网络歌单功能" tabindex="-1">🌏 网络歌单功能 <a class="header-anchor" href="#🌏-网络歌单功能" aria-label="Permalink to &quot;🌏 网络歌单功能&quot;" target="_self">​</a></h2><p>可以配置一个 json 格式的歌单，支持电台和歌曲，也可以直接用别人分享的链接，同时配备了 m3u 文件格式转换工具，可以很方便的把 m3u 电台文件转换成网络歌单格式的 json 文件，具体用法见 <a href="https://github.com/hanxi/xiaomusic/issues/78" target="_self">https://github.com/hanxi/xiaomusic/issues/78</a></p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>欢迎有想法的朋友们制作更多的歌单转换工具。</p></div><h2 id="🍺-更多其他可选配置" tabindex="-1">🍺 更多其他可选配置 <a class="header-anchor" href="#🍺-更多其他可选配置" aria-label="Permalink to &quot;🍺 更多其他可选配置&quot;" target="_self">​</a></h2><ul><li>XIAOMUSIC_ACTIVE_CMD 环境变量，对应后台的 【允许唤醒的命令】，用于唤醒口令，配置成&#39;play,random_play&#39;，在非播放状态下，只有这两个指令（播放歌曲和随机播放）可以触发，触发后，xiaomusic进入playing状态，其他指令则可以正常触发。具体见 <a href="https://github.com/hanxi/xiaomusic/pull/43" target="_self">https://github.com/hanxi/xiaomusic/pull/43</a></li><li>XIAOMUSIC_EXCLUDE_DIRS 配置歌曲目录里需要忽略的目录，对应后台的 【忽略目录】</li><li>XIAOMUSIC_MUSIC_PATH_DEPTH 配置歌曲目录搜索深度，对应后台的 【目录深度】，具体见 <a href="https://github.com/hanxi/xiaomusic/issues/76" target="_self">https://github.com/hanxi/xiaomusic/issues/76</a></li><li>XIAOMUSIC_DISABLE_HTTPAUTH 配置成 false 表示开启密码访问web控制台，对应后台的 【关闭密码验证】，具体见 <a href="https://github.com/hanxi/xiaomusic/issues/47" target="_self">https://github.com/hanxi/xiaomusic/issues/47</a></li><li>XIAOMUSIC_HTTPAUTH_USERNAME 配置 web 控制台用户，对应后台的 【控制台账户】</li><li>XIAOMUSIC_HTTPAUTH_PASSWORD 配置 web 控制台密码，对应后台的 【控制台密码】</li><li>XIAOMUSIC_CONF_PATH 用来存放配置文件的目录，对应后台的 【配置文件目录】，记得把目录映射到主机，默认为 <code>/app/config</code> ，具体见 <a href="https://github.com/hanxi/xiaomusic/issues/74" target="_self">https://github.com/hanxi/xiaomusic/issues/74</a></li><li>XIAOMUSIC_CACHE_DIR 用来音乐 tag 缓存，默认为 <code>/app/cache</code>，对应后台的 【缓存文件目录】。</li><li>XIAOMUSIC_DISABLE_DOWNLOAD 设为 true 时关闭下载功能，对应后台的 【关闭下载功能】，见 <a href="https://github.com/hanxi/xiaomusic/issues/82" target="_self">https://github.com/hanxi/xiaomusic/issues/82</a></li><li>XIAOMUSIC_USE_MUSIC_API 设为 true 时使用 player_play_music 接口播放音乐，对应后台的 【型号兼容模式】，用于兼容不能播放的型号，如果发现需要设置这个选项的时候请告知我加一下设备型号，方便以后不用设置。 见 <a href="https://github.com/hanxi/xiaomusic/issues/30" target="_self">https://github.com/hanxi/xiaomusic/issues/30</a></li><li>XIAOMUSIC_KEYWORDS_PLAY 用来播放歌曲的口令前缀，对应后台的 【播放歌曲口令】，默认是 &quot;播放歌曲,放歌曲&quot; ，可以用英文逗号分割配置多个</li><li>XIAOMUSIC_KEYWORDS_STOP 用来关机的口令，对应后台的 【停止口令】，默认是 &quot;关机,暂停,停止&quot; ，可以用英文逗号分割配置多个。</li><li>XIAOMUSIC_KEYWORDS_PLAYLOCAL 用来播放本地歌曲的口令前缀，对应后台的 【播放本地歌曲口令】，本地找不到时不会下载歌曲，默认是 &quot;播放本地歌曲,本地播放歌曲&quot; ，可以用英文逗号分割配置多个。</li><li>XIAOMUSIC_ENABLE_FUZZY_MATCH 设为 true 时开启模糊匹配（默认），设为 false 时关闭模糊匹配，对应后台的 【开启模糊搜索】，支持模糊匹配歌名和歌单名。 具体见 <a href="https://github.com/hanxi/xiaomusic/issues/52" target="_self">https://github.com/hanxi/xiaomusic/issues/52</a></li><li>XIAOMUSIC_FUZZY_MATCH_CUTOFF 设置模糊搜索匹配的最低相似度阈值（默认0.6，可以配0到1直接的小数），越小越模糊，越大越精准，对应后台的 【模糊匹配阈值】。具体见 <a href="https://github.com/hanxi/xiaomusic/issues/52" target="_self">https://github.com/hanxi/xiaomusic/issues/52</a></li><li>XIAOMUSIC_PUBLIC_PORT 用于设置外网端口，对应后台的 【外网访问端口】，当使用反向代理时可以设置为外网端口，XIAOMUSIC_HOSTNAME 设为外网IP或者域名即可。</li><li>XIAOMUSIC_DOWNLOAD_PATH 变量可以配置下载目录，默认为空，表示使用 music 目录为下载目录，对应后台的 【音乐下载目录】。设置这个目录必须是 music 的子目录，否则刷新列表后会找不到歌曲。具体见 <a href="https://github.com/hanxi/xiaomusic/issues/98" target="_self">https://github.com/hanxi/xiaomusic/issues/98</a></li><li>XIAOMUSIC_PROXY 用于配置国内使用 youtube 源下载歌曲时使用的代理，参数格式参考 yt-dlp 文档说明。 见 <a href="https://github.com/hanxi/xiaomusic/issues/2" target="_self">https://github.com/hanxi/xiaomusic/issues/2</a> 和 <a href="https://github.com/hanxi/xiaomusic/issues/11" target="_self">https://github.com/hanxi/xiaomusic/issues/11</a></li><li>MIIO_TTS_CMD 用于部分机型（如：<code>L05C</code>）使用 MiIO 支持 tts 能力，默认为空，命令选择见 <a href="https://github.com/yihong0618/MiService" target="_self">MiService-fork 文档</a></li></ul><h3 id="⚠️-安全提醒" tabindex="-1">⚠️ 安全提醒 <a class="header-anchor" href="#⚠️-安全提醒" aria-label="Permalink to &quot;⚠️ 安全提醒&quot;" target="_self">​</a></h3><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p></p><ol><li>如果配置了公网访问 xiaomusic ，请一定要开启密码登陆，并设置复杂的密码。且不要在公共场所的 WiFi 环境下使用，否则可能造成小米账号密码泄露。</li><li>强烈不建议将小爱音箱的小米账号绑定摄像头，代码难免会有 bug ，一旦小米账号密码泄露，可能监控录像也会泄露。</li></ol></div><h2 id="🤔-高级篇" tabindex="-1">🤔 高级篇 <a class="header-anchor" href="#🤔-高级篇" aria-label="Permalink to &quot;🤔 高级篇&quot;" target="_self">​</a></h2><ul><li>自定义口令功能 <a href="https://github.com/hanxi/xiaomusic/issues/105" target="_self">https://github.com/hanxi/xiaomusic/issues/105</a></li><li>[ ] 缺少一篇教程 <a href="https://github.com/hanxi/xiaomusic/issues/105" target="_self">如何写自定义插件</a></li></ul><h2 id="📢-讨论区" tabindex="-1">📢 讨论区 <a class="header-anchor" href="#📢-讨论区" aria-label="Permalink to &quot;📢 讨论区&quot;" target="_self">​</a></h2><ul><li><a href="https://pd.qq.com/s/e2jybz0ss" target="_self">点击链接加入QQ频道【xiaomusic】</a></li><li><a href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&amp;k=13St5PLVcTxYlWTAs_iAawazjtdD1l-a&amp;authKey=dJWEpaT2fDBDpdUUOWj%2FLt6NS1ePBfShDfz7a6seNURi05VvVnAGQzXF%2FM%2F5HgIm&amp;noverify=0&amp;group_code=604526973" target="_self">点击链接加入群聊【xiaomusic】 604526973</a></li><li><a href="https://github.com/hanxi/xiaomusic/issues" target="_self">https://github.com/hanxi/xiaomusic/issues</a></li><li><a href="https://github.com/hanxi/xiaomusic/issues/86" target="_self">微信群二维码</a></li></ul><h2 id="❤️-感谢" tabindex="-1">❤️ 感谢 <a class="header-anchor" href="#❤️-感谢" aria-label="Permalink to &quot;❤️ 感谢&quot;" target="_self">​</a></h2><ul><li><a href="https://www.mi.com/" target="_self">xiaomi</a></li><li><a href="https://pdm.fming.dev/latest/" target="_self">PDM</a></li><li><a href="https://github.com/yihong0618/xiaogpt" target="_self">xiaogpt</a></li><li><a href="https://github.com/yihong0618/MiService" target="_self">MiService</a></li><li><a href="https://github.com/yihong0618/gitblog/issues/258" target="_self">实现原理</a></li><li><a href="https://github.com/yt-dlp/yt-dlp" target="_self">yt-dlp</a></li><li><a href="https://github.com/zzz6519003/awesome-xiaoai" target="_self">awesome-xiaoai</a></li><li><a href="https://github.com/F-loat/xiaoplayer" target="_self">微信小程序: XIAO晓音</a></li><li><a href="https://github.com/52fisher/xiaomusicUI" target="_self">pure 主题 xiaomusicUI</a></li><li><a href="https://github.com/52fisher/XMusicPlayer" target="_self">移动端的播放器主题</a></li><li><a href="https://github.com/DarrenWen/xiaomusicui" target="_self">一个第三方的主题</a></li><li>所有帮忙调试和测试的朋友</li><li>所有反馈问题和建议的朋友</li></ul><h3 id="👉-其他教程" tabindex="-1">👉 其他教程 <a class="header-anchor" href="#👉-其他教程" aria-label="Permalink to &quot;👉 其他教程&quot;" target="_self">​</a></h3><p>更多功能见 <a href="https://github.com/hanxi/xiaomusic/issues/211" target="_self">📝 文档汇总</a></p><h2 id="🚨-免责声明" tabindex="-1">🚨 免责声明 <a class="header-anchor" href="#🚨-免责声明" aria-label="Permalink to &quot;🚨 免责声明&quot;" target="_self">​</a></h2><p>本项目仅供学习和研究目的，不得用于任何商业活动。用户在使用本项目时应遵守所在地区的法律法规，对于违法使用所导致的后果，本项目及作者不承担任何责任。 本项目可能存在未知的缺陷和风险（包括但不限于设备损坏和账号封禁等），使用者应自行承担使用本项目所产生的所有风险及责任。 作者不保证本项目的准确性、完整性、及时性、可靠性，也不承担任何因使用本项目而产生的任何损失或损害责任。 使用本项目即表示您已阅读并同意本免责声明的全部内容。</p><h2 id="star-history" tabindex="-1">Star History <a class="header-anchor" href="#star-history" aria-label="Permalink to &quot;Star History&quot;" target="_self">​</a></h2><p><a href="https://star-history.com/#hanxi/xiaomusic&amp;Date" target="_self"><img src="https://api.star-history.com/svg?repos=hanxi/xiaomusic&amp;type=Date" alt="Star History Chart"></a></p><h2 id="赞赏" tabindex="-1">赞赏 <a class="header-anchor" href="#赞赏" aria-label="Permalink to &quot;赞赏&quot;" target="_self">​</a></h2><ul><li>💰 爱发电 <a href="https://afdian.com/a/imhanxi" target="_self">https://afdian.com/a/imhanxi</a></li><li>点个 Star ⭐</li><li>谢谢 ❤️</li><li><img src="https://i.v2ex.co/7Q03axO5l.png" alt="喝杯奶茶"></li></ul><h2 id="license" tabindex="-1">License <a class="header-anchor" href="#license" aria-label="Permalink to &quot;License&quot;" target="_self">​</a></h2><p><a href="https://github.com/hanxi/xiaomusic/blob/main/LICENSE" target="_self">MIT</a> License © 2024 涵曦</p>`,82)]))}const g=s(h,[["render",e]]);export{c as __pageData,g as default};
